!function(){"use strict";var e,t={439:function(e,t,o){var n=window.wp.blocks,l=window.wp.element,a=window.wp.i18n,r=window.wp.blockEditor,i=window.wp.components;function d(e){let{attributes:t,setAttributes:o}=e;const{mediaUrl:n,showDownloadPDF:r,showPrintPDF:d,showFullScreen:c,dockPageControls:p,embedMode:s,width:u,height:m,apiKey:h,showAnnotationTools:w,enableFormFilling:f}=t;return(0,l.createElement)(l.Fragment,null,(0,l.createElement)(i.PanelBody,{title:(0,a.__)("Settings","popper"),initialOpen:!0},(0,l.createElement)(i.TextControl,{label:(0,a.__)("API Key","popper"),help:(0,l.createElement)(l.RawHTML,null,sprintf((0,a.__)("<p>Get your free API key on %s.</p>","popper"),'<a href="https://www.adobe.io/apis/documentcloud/dcsdk/pdf-embed.html" target="_blank">Adobe  Official site</a>')),value:h,onChange:e=>o({apiKey:e})}),(0,l.createElement)(i.SelectControl,{label:(0,a.__)("Embed mode","popper"),value:s,options:[{label:(0,a.__)("Default","popper"),value:""},{label:(0,a.__)("Sized Container","popper"),value:"SIZED_CONTAINER"},{label:(0,a.__)("Inline","popper"),value:"IN_LINE"}],onChange:e=>o({embedMode:e})}),(0,l.createElement)(i.ToggleControl,{label:(0,a.__)("Show Download PDF","popper"),checked:r,onChange:e=>o({showDownloadPDF:e})}),(0,l.createElement)(i.ToggleControl,{label:(0,a.__)("Show Print PDF","popper"),checked:d,onChange:e=>o({showPrintPDF:e})}),(0,l.createElement)(i.ToggleControl,{label:(0,a.__)("Show FullScreen Mode","popper"),checked:c,onChange:e=>o({showFullScreen:e})}),(0,l.createElement)(i.ToggleControl,{label:(0,a.__)("Page Controls Docked","popper"),checked:p,onChange:e=>o({dockPageControls:e})}),(0,l.createElement)(i.ToggleControl,{label:(0,a.__)("Show Annotation Tools","popper"),checked:w,onChange:e=>o({showAnnotationTools:e})}),(0,l.createElement)(i.ToggleControl,{label:(0,a.__)("Enable Form Filling","popper"),checked:f,onChange:e=>o({enableFormFilling:e})}),(0,l.createElement)(i.PanelRow,null,"SIZED_CONTAINER"===s&&(0,l.createElement)(l.Fragment,null,(0,l.createElement)(i.RangeControl,{label:(0,a.__)("Height","popper"),help:(0,l.createElement)("small",null,(0,a.__)("Show the popup when this percentage of the page has been scrolled.")),beforeIcon:"image-flip-vertical",value:m,onChange:e=>o({height:e}),min:500,max:1e3})))))}function c(e){const{attributes:t,setAttributes:o}=e,{mediaUrl:n,embedMode:d,height:c,apiKey:p,showPrintPdf:s,fileName:u}=t,m=e=>{o({mediaUrl:e.url,fileName:e.filename})};return(0,l.useEffect)((()=>{var e=document.createElement("script");e.src="https://documentcloud.adobe.com/view-sdk/main.js",document.head.appendChild(e),n&&document.addEventListener("adobe_dc_view_sdk.ready",(function(){new AdobeDC.View({clientId:p,divId:"adobe-dc-view"}).previewFile({content:{location:{url:n}},metaData:{fileName:u}},t)}))}),[]),(0,l.useEffect)((()=>{if(window.AdobeDC){var e=document.getElementById("adobe-dc-view");e&&(e.style.height="500px",new AdobeDC.View({clientId:p,divId:"adobe-dc-view"}).previewFile({content:{location:{url:n}},metaData:{fileName:u}},t))}}),[n,d,p,s]),(0,l.createElement)(l.Fragment,null,n?(0,l.createElement)(l.Fragment,null,(0,l.createElement)(r.BlockControls,null,n&&(0,l.createElement)(i.ToolbarGroup,null,(0,l.createElement)(r.MediaReplaceFlow,{mediaURL:n,allowedTypes:["application/pdf"],accept:".pdf",onSelect:e=>m(e),onError:()=>console.log(99)}))),(0,l.createElement)("div",{id:"adobe-dc-view",style:{height:c}})):(0,l.createElement)(r.MediaPlaceholder,{icon:"pdf",labels:{title:(0,a.__)("PDF"),instructions:(0,a.__)("Upload a PDF file, pick one from your media library, or add one with a URL.")},className:"block-image",onSelect:m,onSelectURL:e=>{o({mediaUrl:e,fileName:new URL(e).pathname.split("/").pop()})},accept:".pdf",allowedTypes:["application/pdf"]}))}window.wp.apiFetch,window.lodash;var p=window.wp.api,s=o.n(p),u=window.wp.data;function m(){return m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},m.apply(this,arguments)}(0,n.registerBlockType)("tropicalista/pdfembed",{edit:function(e){const[t,o]=(0,l.useState)(!1),{attributes:n,setAttributes:p}=e,{apiKey:m,mediaUrl:h}=n;return(0,l.useEffect)((()=>{(0,u.subscribe)((()=>{const e=(0,u.select)("core/editor").isSavingPost();(0,u.select)("core/editor").isAutosavingPost()||e&&new(s().models.Settings)({pdf_embed_api_key:m}).save()})),s().loadPromise.then((()=>{let e=new(s().models.Settings);!1===t&&e.fetch().then((e=>{console.log(e.pdf_embed_api_key),p({apiKey:e.pdf_embed_api_key}),o(!0)}))}))}),[]),(0,l.createElement)("div",(0,r.useBlockProps)(),(0,l.createElement)(r.InspectorControls,null,(0,l.createElement)(d,e)),m?(0,l.createElement)(c,e):(0,l.createElement)(i.Placeholder,{icon:"pdf",instructions:(0,l.createElement)(l.RawHTML,null,sprintf((0,a.__)("<p>Please insert a <b>free api Key</b> in the settings panel on the right. Get your free API key on %s.</p>","popper"),'<a href="https://www.adobe.io/apis/documentcloud/dcsdk/pdf-embed.html" target="_blank">Adobe  Official site</a>')),label:(0,a.__)("Missing key","popper")}))},save:function(e){let{attributes:t}=e;const{mediaUrl:o,embedMode:n,height:a,apiKey:i,showPrintPDF:d,showDownloadPDF:c,showPageControls:p,showFullScreen:s,dockPageControls:u,fileName:h,showAnnotationTools:w,enableFormFilling:f}=t;return(0,l.createElement)("div",m({id:"adobe-dc-view"},r.useBlockProps.save(),{style:{height:t.height},"data-apiKey":i,"data-fileName":h,"data-mediaUrl":o,"data-embedMode":n,"data-showDownloadPDF":c,"data-showPrintPDF":d,"data-showPageControls":p,"data-showFullScreen":s,"data-dockPageControls":u,"data-showAnnotationTools":w,"data-enableFormFilling":f}))}})}},o={};function n(e){var l=o[e];if(void 0!==l)return l.exports;var a=o[e]={exports:{}};return t[e](a,a.exports,n),a.exports}n.m=t,e=[],n.O=function(t,o,l,a){if(!o){var r=1/0;for(p=0;p<e.length;p++){o=e[p][0],l=e[p][1],a=e[p][2];for(var i=!0,d=0;d<o.length;d++)(!1&a||r>=a)&&Object.keys(n.O).every((function(e){return n.O[e](o[d])}))?o.splice(d--,1):(i=!1,a<r&&(r=a));if(i){e.splice(p--,1);var c=l();void 0!==c&&(t=c)}}return t}a=a||0;for(var p=e.length;p>0&&e[p-1][2]>a;p--)e[p]=e[p-1];e[p]=[o,l,a]},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={826:0,46:0};n.O.j=function(t){return 0===e[t]};var t=function(t,o){var l,a,r=o[0],i=o[1],d=o[2],c=0;if(r.some((function(t){return 0!==e[t]}))){for(l in i)n.o(i,l)&&(n.m[l]=i[l]);if(d)var p=d(n)}for(t&&t(o);c<r.length;c++)a=r[c],n.o(e,a)&&e[a]&&e[a][0](),e[r[c]]=0;return n.O(p)},o=self.webpackChunkadobe_pdf=self.webpackChunkadobe_pdf||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var l=n.O(void 0,[46],(function(){return n(439)}));l=n.O(l)}();