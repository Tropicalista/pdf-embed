!function(){"use strict";var e,t={439:function(e,t,n){var o=window.wp.blocks;function l(){return l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},l.apply(this,arguments)}var a=window.wp.element,r=window.wp.i18n,i=window.wp.blockEditor,d=window.wp.components;function c(e){let{attributes:t,setAttributes:n}=e;const{mediaUrl:o,showDownloadPDF:l,showPrintPDF:i,showFullScreen:c,dockPageControls:s,embedMode:p,width:m,height:u,apiKey:f,showAnnotationTools:h,enableFormFilling:b}=t;return(0,a.createElement)(a.Fragment,null,(0,a.createElement)(d.PanelBody,{title:(0,r.__)("Settings","pdf-embed"),initialOpen:!0},(0,a.createElement)(d.TextControl,{label:(0,r.__)("API Key","pdf-embed"),help:(0,a.createElement)(a.RawHTML,null,sprintf((0,r.__)("<p>Get your free API key on %s.</p>","pdf-embed"),'<a href="https://www.adobe.io/apis/documentcloud/dcsdk/pdf-embed.html" target="_blank">Adobe  Official site</a>')),value:f,onChange:e=>n({apiKey:e})}),(0,a.createElement)(d.SelectControl,{label:(0,r.__)("Embed mode","pdf-embed"),value:p,options:[{label:(0,r.__)("Default","pdf-embed"),value:""},{label:(0,r.__)("Sized Container","pdf-embed"),value:"SIZED_CONTAINER"},{label:(0,r.__)("Inline","pdf-embed"),value:"IN_LINE"}],onChange:e=>n({embedMode:e})}),(0,a.createElement)(d.ToggleControl,{label:(0,r.__)("Show Download PDF","pdf-embed"),checked:l,onChange:e=>n({showDownloadPDF:e})}),(0,a.createElement)(d.ToggleControl,{label:(0,r.__)("Show Print PDF","pdf-embed"),checked:i,onChange:e=>n({showPrintPDF:e})}),(0,a.createElement)(d.ToggleControl,{label:(0,r.__)("Show FullScreen Mode","pdf-embed"),checked:c,onChange:e=>n({showFullScreen:e})}),(0,a.createElement)(d.ToggleControl,{label:(0,r.__)("Page Controls Docked","pdf-embed"),checked:s,onChange:e=>n({dockPageControls:e})}),(0,a.createElement)(d.ToggleControl,{label:(0,r.__)("Show Annotation Tools","pdf-embed"),checked:h,onChange:e=>n({showAnnotationTools:e})}),(0,a.createElement)(d.ToggleControl,{label:(0,r.__)("Enable Form Filling","pdf-embed"),checked:b,onChange:e=>n({enableFormFilling:e})}),(0,a.createElement)(d.PanelRow,null,"SIZED_CONTAINER"===p&&(0,a.createElement)(a.Fragment,null,(0,a.createElement)(d.RangeControl,{label:(0,r.__)("Height","pdf-embed"),help:(0,a.createElement)("small",null,(0,r.__)("Show the popup when this percentage of the page has been scrolled.")),beforeIcon:"image-flip-vertical",value:u,onChange:e=>n({height:e}),min:500,max:1e3})))))}function s(e){const{attributes:t,setAttributes:n,clientId:o}=e,{mediaUrl:l,embedMode:c,height:s,apiKey:p,showPrintPdf:m,fileName:u}=t,f=e=>{n({mediaUrl:e.url,fileName:e.filename})};return(0,a.useEffect)((()=>{var e=document.createElement("script");e.src="https://documentcloud.adobe.com/view-sdk/main.js",document.head.appendChild(e),l&&document.addEventListener("adobe_dc_view_sdk.ready",(function(){new AdobeDC.View({clientId:p,divId:"block-"+o}).previewFile({content:{location:{url:l}},metaData:{fileName:u}},t)}))}),[]),(0,a.useEffect)((()=>{if(window.AdobeDC){var e=document.getElementById("block-"+o);e&&(e.style.height="500px",new AdobeDC.View({clientId:p,divId:"block-"+o}).previewFile({content:{location:{url:l}},metaData:{fileName:u}},t))}}),[l,c,p,m]),(0,a.createElement)(a.Fragment,null,l?(0,a.createElement)(a.Fragment,null,(0,a.createElement)(i.BlockControls,null,l&&(0,a.createElement)(d.ToolbarGroup,null,(0,a.createElement)(i.MediaReplaceFlow,{mediaURL:l,allowedTypes:["application/pdf"],accept:".pdf",onSelect:e=>f(e),onError:()=>console.log(99)}))),(0,a.createElement)("div",{style:{height:s}})):(0,a.createElement)(i.MediaPlaceholder,{icon:"pdf",labels:{title:(0,r.__)("PDF"),instructions:(0,r.__)("Upload a PDF file, pick one from your media library, or add one with a URL.")},className:"block-image",onSelect:f,onSelectURL:e=>{n({mediaUrl:e,fileName:new URL(e).pathname.split("/").pop()})},accept:".pdf",allowedTypes:["application/pdf"]}))}window.wp.apiFetch,window.lodash;var p=window.wp.api,m=n.n(p),u=window.wp.data;(0,o.registerBlockType)("tropicalista/pdfembed",{edit:function(e){const[t,n]=(0,a.useState)(!1),{attributes:o,setAttributes:p}=e,{apiKey:f,height:h}=o;return(0,a.useEffect)((()=>{(0,u.subscribe)((()=>{const e=(0,u.select)("core/editor").isSavingPost();(0,u.select)("core/editor").isAutosavingPost()||e&&new(m().models.Settings)({pdf_embed_api_key:f}).save()})),m().loadPromise.then((()=>{let e=new(m().models.Settings);!1===t&&e.fetch().then((e=>{p({apiKey:e.pdf_embed_api_key}),n(!0)}))}))}),[]),(0,a.createElement)("div",l({},(0,i.useBlockProps)(),{style:{height:h}}),(0,a.createElement)(i.InspectorControls,null,(0,a.createElement)(c,e)),f?(0,a.createElement)(s,e):(0,a.createElement)(d.Placeholder,{icon:"pdf",instructions:(0,a.createElement)(a.RawHTML,null,sprintf((0,r.__)("<p>Please insert a <b>free api Key</b> in the settings panel on the right. Get your free API key on %s.</p>","pdf-embed"),'<a href="https://www.adobe.io/apis/documentcloud/dcsdk/pdf-embed.html" target="_blank">Adobe  Official site</a>')),label:(0,r.__)("Missing key","pdf-embed")}))},save:function(e){let{attributes:t}=e;const{mediaUrl:n,embedMode:o,height:r,apiKey:d,showPrintPDF:c,showDownloadPDF:s,showPageControls:p,showFullScreen:m,dockPageControls:u,fileName:f,showAnnotationTools:h,enableFormFilling:b}=t;return(0,a.createElement)("div",l({id:"adobe-dc-view"},i.useBlockProps.save(),{style:{height:t.height},"data-apiKey":d,"data-fileName":f,"data-mediaUrl":n,"data-embedMode":o,"data-showDownloadPDF":s,"data-showPrintPDF":c,"data-showPageControls":p,"data-showFullScreen":m,"data-dockPageControls":u,"data-showAnnotationTools":h,"data-enableFormFilling":b}))}})}},n={};function o(e){var l=n[e];if(void 0!==l)return l.exports;var a=n[e]={exports:{}};return t[e](a,a.exports,o),a.exports}o.m=t,e=[],o.O=function(t,n,l,a){if(!n){var r=1/0;for(s=0;s<e.length;s++){n=e[s][0],l=e[s][1],a=e[s][2];for(var i=!0,d=0;d<n.length;d++)(!1&a||r>=a)&&Object.keys(o.O).every((function(e){return o.O[e](n[d])}))?n.splice(d--,1):(i=!1,a<r&&(r=a));if(i){e.splice(s--,1);var c=l();void 0!==c&&(t=c)}}return t}a=a||0;for(var s=e.length;s>0&&e[s-1][2]>a;s--)e[s]=e[s-1];e[s]=[n,l,a]},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,{a:t}),t},o.d=function(e,t){for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={826:0,46:0};o.O.j=function(t){return 0===e[t]};var t=function(t,n){var l,a,r=n[0],i=n[1],d=n[2],c=0;if(r.some((function(t){return 0!==e[t]}))){for(l in i)o.o(i,l)&&(o.m[l]=i[l]);if(d)var s=d(o)}for(t&&t(n);c<r.length;c++)a=r[c],o.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return o.O(s)},n=self.webpackChunkadobe_pdf=self.webpackChunkadobe_pdf||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var l=o.O(void 0,[46],(function(){return o(439)}));l=o.O(l)}();