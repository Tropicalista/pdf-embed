!function(){"use strict";var e,t={356:function(e,t,o){var n=window.wp.blocks,l=JSON.parse('{"$schema":"https://json.schemastore.org/block.json","apiVersion":2,"name":"tropicalista/pdfembed","version":"0.2.0","title":"Embed Pdf","category":"embed","icon":"pdf","description":"PDF embedder with official Adobe Embed API.","supports":{"html":false},"attributes":{"blockId":{"type":"string"},"apiKey":{"type":"string"},"width":{"type":"number","default":500},"height":{"type":"number","default":500},"mediaUrl":{"type":"string"},"fileName":{"type":"string","default":"My PDF"},"embedMode":{"type":"string","default":""},"showDownloadPDF":{"type":"boolean","default":true},"showPrintPDF":{"type":"boolean","default":true},"showFullScreen":{"type":"boolean","default":true},"showPageControls":{"type":"boolean","default":true},"dockPageControls":{"type":"boolean","default":true},"enableFormFilling":{"type":"boolean","default":true},"showAnnotationTools":{"type":"boolean","default":true}},"textdomain":"pdf-embed","editorScript":"file:./build/index.js","editorStyle":"file:./build/index.css","style":"file:./build/style-index.css","viewScript":"file:./build/frontend.js"}');function a(){return a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},a.apply(this,arguments)}var i=window.wp.element,r=window.wp.i18n,d=window.wp.blockEditor,c=window.wp.components;function s(e){let{attributes:t,setAttributes:o}=e;const{mediaUrl:n,showDownloadPDF:l,showPrintPDF:a,showFullScreen:d,dockPageControls:s,embedMode:p,width:u,height:m,apiKey:f,showAnnotationTools:b,enableFormFilling:h}=t;return(0,i.createElement)(i.Fragment,null,(0,i.createElement)(c.PanelBody,{title:(0,r.__)("Settings","pdf-embed"),initialOpen:!0},(0,i.createElement)(c.TextControl,{label:(0,r.__)("API Key","pdf-embed"),help:(0,i.createElement)(i.RawHTML,null,sprintf((0,r.__)("<p>Get your free API key on %s.</p>","pdf-embed"),'<a href="https://www.adobe.io/apis/documentcloud/dcsdk/pdf-embed.html" target="_blank">Adobe  Official site</a>')),value:f,onChange:e=>o({apiKey:e})}),(0,i.createElement)(c.SelectControl,{label:(0,r.__)("Embed mode","pdf-embed"),value:p,options:[{label:(0,r.__)("Default","pdf-embed"),value:""},{label:(0,r.__)("Sized Container","pdf-embed"),value:"SIZED_CONTAINER"},{label:(0,r.__)("Inline","pdf-embed"),value:"IN_LINE"}],onChange:e=>o({embedMode:e})}),(0,i.createElement)(c.ToggleControl,{label:(0,r.__)("Show Download PDF","pdf-embed"),checked:l,onChange:e=>o({showDownloadPDF:e})}),(0,i.createElement)(c.ToggleControl,{label:(0,r.__)("Show Print PDF","pdf-embed"),checked:a,onChange:e=>o({showPrintPDF:e})}),(0,i.createElement)(c.ToggleControl,{label:(0,r.__)("Show FullScreen Mode","pdf-embed"),checked:d,onChange:e=>o({showFullScreen:e})}),(0,i.createElement)(c.ToggleControl,{label:(0,r.__)("Page Controls Docked","pdf-embed"),checked:s,onChange:e=>o({dockPageControls:e})}),(0,i.createElement)(c.ToggleControl,{label:(0,r.__)("Show Annotation Tools","pdf-embed"),checked:b,onChange:e=>o({showAnnotationTools:e})}),(0,i.createElement)(c.ToggleControl,{label:(0,r.__)("Enable Form Filling","pdf-embed"),checked:h,onChange:e=>o({enableFormFilling:e})}),"SIZED_CONTAINER"===p&&(0,i.createElement)(i.Fragment,null,(0,i.createElement)(c.RangeControl,{label:(0,r.__)("Height","pdf-embed"),help:(0,i.createElement)("small",null,(0,r.__)("Set the height of PDF.","pdf-embed")),beforeIcon:"image-flip-vertical",value:m,onChange:e=>o({height:e}),min:500,max:1e3}))))}function p(e){const{attributes:t,setAttributes:o,clientId:n}=e,{mediaUrl:l,embedMode:a,height:s,apiKey:p,showPrintPdf:u,fileName:m}=t,f=e=>{console.log(e),e.id&&o({mediaUrl:e.url,fileName:e.filename?e.filename:e.title})};return(0,i.useEffect)((()=>{var e=document.createElement("script");e.src="https://documentcloud.adobe.com/view-sdk/main.js",document.head.appendChild(e),l&&document.addEventListener("adobe_dc_view_sdk.ready",(function(){new AdobeDC.View({clientId:p,divId:"block-"+n}).previewFile({content:{location:{url:l}},metaData:{fileName:m}},t)}))}),[]),(0,i.useEffect)((()=>{if(window.AdobeDC&&l){var e=document.getElementById("block-"+n);e&&l&&(e.style.height="500px",new AdobeDC.View({clientId:p,divId:"block-"+n}).previewFile({content:{location:{url:l}},metaData:{fileName:m}},t))}}),[l,a,p,u]),(0,i.createElement)(i.Fragment,null,l?(0,i.createElement)(i.Fragment,null,(0,i.createElement)(d.BlockControls,null,l&&(0,i.createElement)(c.ToolbarGroup,null,(0,i.createElement)(d.MediaReplaceFlow,{mediaURL:l,allowedTypes:["application/pdf"],accept:".pdf",onSelect:e=>f(e),onError:()=>console.log(99)}))),(0,i.createElement)("div",{style:{height:s}})):(0,i.createElement)(d.MediaPlaceholder,{icon:"pdf",labels:{title:(0,r.__)("PDF"),instructions:(0,r.__)("Upload a PDF file, pick one from your media library, or add one with a URL.")},className:"block-image",onSelect:f,onSelectURL:e=>{o({mediaUrl:e,fileName:new URL(e).pathname.split("/").pop()})},accept:".pdf",allowedTypes:["application/pdf"]}))}window.wp.apiFetch,window.lodash;var u=window.wp.api,m=o.n(u),f=window.wp.data;(0,n.registerBlockType)(l,{edit:function(e){const[t,o]=(0,i.useState)(!1),{attributes:n,setAttributes:l,clientId:u}=e,{apiKey:b,height:h,blockId:w}=n;return(0,i.useEffect)((()=>{(0,f.subscribe)((()=>{const e=(0,f.select)("core/editor").isSavingPost();(0,f.select)("core/editor").isAutosavingPost()||e&&new(m().models.Settings)({pdf_embed_api_key:b}).save()})),m().loadPromise.then((()=>{let e=new(m().models.Settings);!1===t&&e.fetch().then((e=>{l({apiKey:e.pdf_embed_api_key}),o(!0)}))})),w||l({blockId:u})}),[]),(0,i.createElement)("div",a({},(0,d.useBlockProps)(),{style:{height:h}}),(0,i.createElement)(d.InspectorControls,null,(0,i.createElement)(s,e)),b?(0,i.createElement)(p,e):(0,i.createElement)(c.Placeholder,{icon:"pdf",instructions:(0,i.createElement)(i.RawHTML,null,sprintf((0,r.__)("<p>Please insert a <b>free api Key</b> in the settings panel on the right. Get your free API key on %s.</p>","pdf-embed"),'<a href="https://www.adobe.io/apis/documentcloud/dcsdk/pdf-embed.html" target="_blank">Adobe  Official site</a>')),label:(0,r.__)("Missing key","pdf-embed")}))},save:function(e){let{attributes:t}=e;const{blockId:o,mediaUrl:n,embedMode:l,height:r,apiKey:c,showPrintPDF:s,showDownloadPDF:p,showPageControls:u,showFullScreen:m,dockPageControls:f,fileName:b,showAnnotationTools:h,enableFormFilling:w}=t;return(0,i.createElement)("div",a({id:o},d.useBlockProps.save(),{style:{height:t.height},"data-apiKey":c,"data-fileName":b,"data-mediaUrl":n,"data-embedMode":l,"data-showDownloadPDF":p,"data-showPrintPDF":s,"data-showPageControls":u,"data-showFullScreen":m,"data-dockPageControls":f,"data-showAnnotationTools":h,"data-enableFormFilling":w}))}})}},o={};function n(e){var l=o[e];if(void 0!==l)return l.exports;var a=o[e]={exports:{}};return t[e](a,a.exports,n),a.exports}n.m=t,e=[],n.O=function(t,o,l,a){if(!o){var i=1/0;for(s=0;s<e.length;s++){o=e[s][0],l=e[s][1],a=e[s][2];for(var r=!0,d=0;d<o.length;d++)(!1&a||i>=a)&&Object.keys(n.O).every((function(e){return n.O[e](o[d])}))?o.splice(d--,1):(r=!1,a<i&&(i=a));if(r){e.splice(s--,1);var c=l();void 0!==c&&(t=c)}}return t}a=a||0;for(var s=e.length;s>0&&e[s-1][2]>a;s--)e[s]=e[s-1];e[s]=[o,l,a]},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={826:0,46:0};n.O.j=function(t){return 0===e[t]};var t=function(t,o){var l,a,i=o[0],r=o[1],d=o[2],c=0;if(i.some((function(t){return 0!==e[t]}))){for(l in r)n.o(r,l)&&(n.m[l]=r[l]);if(d)var s=d(n)}for(t&&t(o);c<i.length;c++)a=i[c],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return n.O(s)},o=self.webpackChunkadobe_pdf=self.webpackChunkadobe_pdf||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var l=n.O(void 0,[46],(function(){return n(356)}));l=n.O(l)}();